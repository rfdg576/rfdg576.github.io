"use strict";(self["webpackChunkcommunityproject"]=self["webpackChunkcommunityproject"]||[]).push([[951],{9951:function(e,a,t){t.r(a),t.d(a,{default:function(){return p}});var l=t(6768),o=t(4373),n=t(1219),s=t(144);const u={class:"job-listing"},r={class:"pagination-container"};var c={__name:"FeedManage",setup(e){const a=(0,s.KR)([]),t=(0,s.KR)(""),c=(0,s.KR)(1),i=(0,s.KR)(10),d=(0,l.EW)((()=>{const e=t.value.trim().toLowerCase();return e?a.value.filter((a=>a.type.toLowerCase().includes(e))):a.value})),p=(0,l.EW)((()=>{const e=(c.value-1)*i.value;return d.value.slice(e,e+i.value)})),v=e=>{c.value=e},g=e=>{i.value=e,c.value=1},b=async()=>{try{const e=await o.A.get("http://localhost:8090/feed",{withCredentials:!0,timeout:1e4});e.data?(console.log("获取到的数据:",e.data),a.value=e.data):console.error("响应体为空")}catch(e){console.error("获取用户数据失败:",e.message)}},m=async e=>{try{const t=await o.A.delete(`http://localhost:8090/delfeed/${e.id}`,{withCredentials:!0,timeout:1e4});if(200===t.status){const t=a.value.indexOf(e);t>-1&&(a.value.splice(t,1),n.nk.success("成功删除"))}}catch(t){console.error("删除用户失败:",t.message),n.nk.error("删除用户失败，请重试。")}};return(0,l.sV)(b),(e,a)=>{const o=(0,l.g2)("el-input"),n=(0,l.g2)("el-table-column"),s=(0,l.g2)("el-button"),b=(0,l.g2)("el-table"),h=(0,l.g2)("el-pagination");return(0,l.uX)(),(0,l.CE)("div",u,[(0,l.bF)(o,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),placeholder:"请输入消息类型关键字",style:{"margin-bottom":"10px"}},null,8,["modelValue"]),(0,l.bF)(b,{data:p.value,style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(n,{label:"类型",prop:"type"}),(0,l.bF)(n,{label:"消息",prop:"message"}),(0,l.bF)(n,{label:"日期",prop:"date"}),(0,l.bF)(n,{label:"操作"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(s,{type:"danger",size:"mini",onClick:a=>m(e)},{default:(0,l.k6)((()=>[(0,l.eW)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,l.Lk)("div",r,[(0,l.bF)(h,{onCurrentChange:v,onSizeChange:g,"current-page":c.value,"page-sizes":[5,10,20],"page-size":i.value,total:d.value.length,layout:"total, sizes, prev, pager, next, jumper"},null,8,["current-page","page-size","total"])])])}}},i=t(1241);const d=(0,i.A)(c,[["__scopeId","data-v-94e8cfdc"]]);var p=d}}]);
//# sourceMappingURL=951.7113ac0b.js.map
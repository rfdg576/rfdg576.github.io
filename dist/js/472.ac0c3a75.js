"use strict";(self["webpackChunkcommunityproject"]=self["webpackChunkcommunityproject"]||[]).push([[472],{7091:function(e,a,t){t.r(a),t.d(a,{default:function(){return d}});var l=t(6768),o=t(4373),n=t(1219),s=t(144);const r={class:"job-listing"},u={class:"pagination-container"};var c={__name:"UserComponent",setup(e){const a=(0,s.KR)([]),t=(0,s.KR)(""),c=(0,s.KR)(1),i=(0,s.KR)(10),p=(0,l.EW)((()=>{const e=t.value.trim().toLowerCase();return e?a.value.filter((a=>a.name.toLowerCase().includes(e))):a.value})),d=(0,l.EW)((()=>{const e=(c.value-1)*i.value;return p.value.slice(e,e+i.value)})),v=e=>{c.value=e},g=e=>{i.value=e,c.value=1},m=async()=>{try{const e=await o.A.get("http://localhost:8090/users",{withCredentials:!0,timeout:1e4});e.data?(console.log("获取到的数据:",e.data),a.value=e.data):console.error("响应体为空")}catch(e){console.error("获取用户数据失败:",e.message)}},b=async e=>{try{const t=await o.A.delete(`http://localhost:8090/deluser/${e.id}`,{withCredentials:!0,timeout:1e4});if(200===t.status){const t=a.value.indexOf(e);t>-1&&(a.value.splice(t,1),n.nk.success("成功删除"))}}catch(t){console.error("删除用户失败:",t.message),n.nk.error("删除用户失败，请重试。")}};return(0,l.sV)(m),(e,a)=>{const o=(0,l.g2)("el-input"),n=(0,l.g2)("el-table-column"),s=(0,l.g2)("el-button"),m=(0,l.g2)("el-table"),h=(0,l.g2)("el-pagination");return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.bF)(o,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),placeholder:"请输入姓名关键字",style:{"margin-bottom":"10px"}},null,8,["modelValue"]),(0,l.bF)(m,{data:d.value,style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(n,{label:"姓名",prop:"name"}),(0,l.bF)(n,{label:"密码",prop:"password"}),(0,l.bF)(n,{label:"角色",prop:"role"}),(0,l.bF)(n,{label:"操作"},{default:(0,l.k6)((({row:e})=>[(0,l.bF)(s,{type:"danger",size:"mini",onClick:a=>b(e)},{default:(0,l.k6)((()=>[(0,l.eW)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,l.Lk)("div",u,[(0,l.bF)(h,{onCurrentChange:v,onSizeChange:g,"current-page":c.value,"page-sizes":[5,10,20],"page-size":i.value,total:p.value.length,layout:"total, sizes, prev, pager, next, jumper"},null,8,["current-page","page-size","total"])])])}}},i=t(1241);const p=(0,i.A)(c,[["__scopeId","data-v-0c8346ad"]]);var d=p}}]);
//# sourceMappingURL=472.ac0c3a75.js.map
"use strict";(self["webpackChunkcommunityproject"]=self["webpackChunkcommunityproject"]||[]).push([[198],{5198:function(s,e,r){r.r(e),r.d(e,{default:function(){return y}});var a=r(6768),o=r(5130),t=r(4232);const n=s=>((0,a.Qi)("data-v-605b746f"),s=s(),(0,a.jt)(),s),d={class:"back"},c={class:"change-password-container"},u=n((()=>(0,a.Lk)("h2",{class:"title"},"修改密码",-1))),i={class:"input-group"},l=n((()=>(0,a.Lk)("label",{for:"currentPassword"},"当前密码",-1))),w={class:"input-group"},p=n((()=>(0,a.Lk)("label",{for:"newPassword"},"新密码",-1))),m={class:"input-group"},h=n((()=>(0,a.Lk)("label",{for:"confirmPassword"},"确认新密码",-1))),g=n((()=>(0,a.Lk)("button",{type:"submit",class:"submit-button"},"提交",-1))),f={key:0,class:"error-message"},k={key:1,class:"success-message"};function P(s,e,r,n,P,b){return(0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("div",c,[u,(0,a.Lk)("form",{onSubmit:e[3]||(e[3]=(0,o.D$)(((...s)=>b.handleSubmit&&b.handleSubmit(...s)),["prevent"])),class:"form"},[(0,a.Lk)("div",i,[l,(0,a.bo)((0,a.Lk)("input",{type:"password",id:"currentPassword","onUpdate:modelValue":e[0]||(e[0]=s=>P.currentPassword=s),required:"",placeholder:"请输入当前密码"},null,512),[[o.Jo,P.currentPassword]])]),(0,a.Lk)("div",w,[p,(0,a.bo)((0,a.Lk)("input",{type:"password",id:"newPassword","onUpdate:modelValue":e[1]||(e[1]=s=>P.newPassword=s),required:"",placeholder:"请输入新密码"},null,512),[[o.Jo,P.newPassword]])]),(0,a.Lk)("div",m,[h,(0,a.bo)((0,a.Lk)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[2]||(e[2]=s=>P.confirmPassword=s),required:"",placeholder:"请确认新密码"},null,512),[[o.Jo,P.confirmPassword]])]),g],32),P.errorMessage?((0,a.uX)(),(0,a.CE)("div",f,(0,t.v_)(P.errorMessage),1)):(0,a.Q3)("",!0),P.successMessage?((0,a.uX)(),(0,a.CE)("div",k,(0,t.v_)(P.successMessage),1)):(0,a.Q3)("",!0)])])}var b=r(4373),v={data(){return{currentPassword:"",newPassword:"",confirmPassword:"",errorMessage:"",successMessage:""}},methods:{async handleSubmit(){if(this.newPassword!==this.confirmPassword)return this.errorMessage="新密码与确认密码不匹配",void(this.successMessage="");try{const s=localStorage.getItem("token"),e=await b.A.post("http://localhost:8090/update_password",{username:localStorage.getItem("username"),new_password:this.newPassword},{headers:{Authorization:`Bearer ${s}`}});e.data.message&&(this.successMessage=e.data.message,this.errorMessage="")}catch(s){this.errorMessage=s.response?.data?.error||"修改密码失败",this.successMessage=""}finally{this.currentPassword="",this.newPassword="",this.confirmPassword=""}}}},L=r(1241);const M=(0,L.A)(v,[["render",P],["__scopeId","data-v-605b746f"]]);var y=M}}]);
//# sourceMappingURL=198.f772ec15.js.map
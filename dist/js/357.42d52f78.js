"use strict";(self["webpackChunkcommunityproject"]=self["webpackChunkcommunityproject"]||[]).push([[357],{5357:function(e,t,o){o.r(t),o.d(t,{default:function(){return _}});var a=o(6768),r=o(5130),n=o(4232);const l=e=>((0,a.Qi)("data-v-465ed98e"),e=e(),(0,a.jt)(),e),i={class:"publish-article"},u=l((()=>(0,a.Lk)("h1",null,"发布消息",-1))),c={class:"form-group"},s=l((()=>(0,a.Lk)("label",{for:"type"},"发布类型:",-1))),p=(0,a.Fv)('<option value="" disabled data-v-465ed98e>请选择发布类型</option><option value="志愿者招募" data-v-465ed98e>志愿者招募</option><option value="工作招聘" data-v-465ed98e>工作招聘</option><option value="失物招领" data-v-465ed98e>失物招领</option><option value="其他事项" data-v-465ed98e>其他事项</option><option value="紧急通知" data-v-465ed98e>紧急通知</option><option value="安全专栏" data-v-465ed98e>安全专栏</option><option value="社区活动" data-v-465ed98e>社区活动</option>',8),d=[p],v={class:"form-group"},h=l((()=>(0,a.Lk)("label",{for:"content"},"内容:",-1))),k={class:"form-group"},m=l((()=>(0,a.Lk)("label",{for:"author"},"发布人:",-1))),b={class:"form-group"},L=l((()=>(0,a.Lk)("label",{for:"contact"},"联系方式:",-1))),f={class:"contact-inputs"},y={class:"form-group"},g=l((()=>(0,a.Lk)("label",null,"发布日期:",-1))),w={class:"button-group"},x=l((()=>(0,a.Lk)("button",{type:"submit"},"发布",-1))),C={key:0,class:"error-message"};function q(e,t,o,l,p,q){return(0,a.uX)(),(0,a.CE)("div",i,[u,(0,a.Lk)("form",{onSubmit:t[6]||(t[6]=(0,r.D$)(((...e)=>l.submitArticle&&l.submitArticle(...e)),["prevent"]))},[(0,a.Lk)("div",c,[s,(0,a.bo)((0,a.Lk)("select",{id:"type","onUpdate:modelValue":t[0]||(t[0]=e=>l.article.type=e),required:""},d,512),[[r.u1,l.article.type]])]),(0,a.Lk)("div",v,[h,(0,a.bo)((0,a.Lk)("textarea",{id:"content","onUpdate:modelValue":t[1]||(t[1]=e=>l.article.content=e),required:""},null,512),[[r.Jo,l.article.content]])]),(0,a.Lk)("div",k,[m,(0,a.bo)((0,a.Lk)("input",{type:"text",id:"author","onUpdate:modelValue":t[2]||(t[2]=e=>l.article.author=e),required:""},null,512),[[r.Jo,l.article.author]])]),(0,a.Lk)("div",b,[L,(0,a.Lk)("div",f,[(0,a.bo)((0,a.Lk)("input",{type:"text",id:"phone","onUpdate:modelValue":t[3]||(t[3]=e=>l.article.phone=e),placeholder:"电话",required:""},null,512),[[r.Jo,l.article.phone]]),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"wechat","onUpdate:modelValue":t[4]||(t[4]=e=>l.article.wechat=e),placeholder:"微信",required:""},null,512),[[r.Jo,l.article.wechat]])])]),(0,a.Lk)("div",y,[g,(0,a.Lk)("p",null,(0,n.v_)(l.article.date),1)]),(0,a.Lk)("div",w,[x,(0,a.Lk)("button",{type:"button",class:"reset-button",onClick:t[5]||(t[5]=(...e)=>l.resetForm&&l.resetForm(...e))},"放弃")])],32),l.errorMessage?((0,a.uX)(),(0,a.CE)("div",C,(0,n.v_)(l.errorMessage),1)):(0,a.Q3)("",!0)])}var A=o(4373),S=o(4874),U=o.n(S),V=o(144),j={setup(){const e=(0,V.KR)({type:"",content:"",author:"",phone:"",wechat:"",date:(new Date).toISOString()}),t=(0,V.KR)(""),o=async()=>{try{const o=await A.A.post("http://localhost:8090/publish",e.value,{headers:{"Content-Type":"application/json"}});console.log("文章提交成功:",o.data),t.value="",U().fire({title:"成功!",text:"文章发布成功！",icon:"success",confirmButtonText:"确定"})}catch(o){console.error("提交文章失败:",o),o.response?t.value=`提交失败: ${o.response.data.message||"未知错误"}`:t.value="提交失败，请稍后再试。"}},a=()=>{e.value={type:"",content:"",author:"",phone:"",wechat:"",date:(new Date).toISOString()},t.value=""};return{article:e,submitArticle:o,resetForm:a,errorMessage:t}}},F=o(1241);const J=(0,F.A)(j,[["render",q],["__scopeId","data-v-465ed98e"]]);var _=J}}]);
//# sourceMappingURL=357.42d52f78.js.map
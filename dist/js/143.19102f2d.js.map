{"version":3,"file":"js/143.19102f2d.js","mappings":"8TAmCA,MAAMA,GAAOC,EAAAA,EAAAA,IAAI,IACXC,GAASD,EAAAA,EAAAA,IAAI,IACbE,GAAcF,EAAAA,EAAAA,IAAI,GAClBG,GAAWH,EAAAA,EAAAA,IAAI,IAGfI,GAAeC,EAAAA,EAAAA,KAAS,KAC5B,MAAMC,EAAaL,EAAOM,MAAMC,OAAOC,cACvC,OAAKH,EACEP,EAAKQ,MAAMG,QAAOC,GAAOA,EAAIC,OAAOH,cAAcI,SAASP,KAD1CP,EAAKQ,KACiD,IAI1EO,GAAgBT,EAAAA,EAAAA,KAAS,KAC7B,MAAMU,GAASb,EAAYK,MAAQ,GAAKJ,EAASI,MACjD,OAAOH,EAAaG,MAAMS,MAAMD,EAAOA,EAAQZ,EAASI,MAAM,IAI1DU,EAAuBC,IAC3BhB,EAAYK,MAAQW,CAAI,EAIpBC,EAAwBC,IAC5BjB,EAASI,MAAQa,EACjBlB,EAAYK,MAAQ,CAAC,EAIjBc,EAAYC,UAChB,IACE,MAAMC,QAAiBC,EAAAA,EAAMC,IAAI,iCAAkC,CACjEC,iBAAiB,EACjBC,QAAS,MAEPJ,EAASK,MACXC,QAAQC,IAAI,UAAWP,EAASK,MAChC7B,EAAKQ,MAAQgB,EAASK,MAEtBC,QAAQE,MAAM,QAElB,CAAE,MAAOA,GACPF,QAAQE,MAAM,YAAaA,EAAMC,QACnC,GAIIC,EAAYX,UAChB,IACE,MAAMC,QAAiBC,EAAAA,EAAMU,OAAO,qCAAqCvB,EAAIwB,KAAM,CACjFT,iBAAiB,EACjBC,QAAS,MAEX,GAAwB,MAApBJ,EAASa,OAAgB,CAC3B,MAAMC,EAAQtC,EAAKQ,MAAM+B,QAAQ3B,GAC7B0B,GAAS,IACXtC,EAAKQ,MAAMgC,OAAOF,EAAO,GACzBG,EAAAA,GAAUC,QAAQ,QAEtB,CACF,CAAE,MAAOV,GACPF,QAAQE,MAAM,UAAWA,EAAMC,SAC/BQ,EAAAA,GAAUT,MAAM,cAClB,G,OAIFW,EAAAA,EAAAA,IAAUrB,G,65BChGV,MAAMsB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://communityproject/./src/components/Manager/ActivityManage.vue","webpack://communityproject/./src/components/Manager/ActivityManage.vue?e372"],"sourcesContent":["<template>\r\n  <div class=\"job-listing\">\r\n    \r\n    <el-table :data=\"paginatedJobs\" style=\"width: 100%\">\r\n      <el-table-column label=\"职位类型\" prop=\"type\" />\r\n      <el-table-column label=\"描述\" prop=\"content\" />\r\n      <el-table-column label=\"作者\" prop=\"author\" />\r\n      <el-table-column label=\"电话\" prop=\"phone\" />\r\n      <el-table-column label=\"微信\" prop=\"wechat\" />\r\n      <el-table-column label=\"发布日期\" prop=\"date\" />\r\n      <el-table-column label=\"操作\">\r\n        <template #default=\"{ row }\">\r\n          <el-button type=\"danger\" size=\"mini\" @click=\"deleteJob(row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div class=\"pagination-container\">\r\n      <el-pagination\r\n        @current-change=\"handleCurrentChange\"\r\n        @size-change=\"handlePageSizeChange\"\r\n        :current-page=\"currentPage\"\r\n        :page-sizes=\"[5, 10, 20]\"\r\n        :page-size=\"pageSize\"\r\n        :total=\"filteredJobs.length\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport axios from 'axios';\r\nimport { ElMessage } from 'element-plus'; // 引入 ElMessage\r\nimport { computed, onMounted, ref } from 'vue';\r\n\r\nconst jobs = ref([]);\r\nconst search = ref('');\r\nconst currentPage = ref(1);\r\nconst pageSize = ref(10); // 每页展示10条数据\r\n\r\n// 计算符合搜索条件的数据\r\nconst filteredJobs = computed(() => {\r\n  const searchTerm = search.value.trim().toLowerCase();\r\n  if (!searchTerm) return jobs.value;\r\n  return jobs.value.filter(job => job.author.toLowerCase().includes(searchTerm)); // 按作者搜索\r\n});\r\n\r\n// 计算当前页显示的数据\r\nconst paginatedJobs = computed(() => {\r\n  const start = (currentPage.value - 1) * pageSize.value;\r\n  return filteredJobs.value.slice(start, start + pageSize.value);\r\n});\r\n\r\n// 更新当前页码\r\nconst handleCurrentChange = (page) => {\r\n  currentPage.value = page;\r\n};\r\n\r\n// 处理每页显示条数变化\r\nconst handlePageSizeChange = (size) => {\r\n  pageSize.value = size;\r\n  currentPage.value = 1; // 重置为第一页\r\n};\r\n\r\n// 获取职位数据\r\nconst fetchJobs = async () => {\r\n  try {\r\n    const response = await axios.get('http://localhost:8090/activity', {\r\n      withCredentials: true,\r\n      timeout: 10000\r\n    });\r\n    if (response.data) {\r\n      console.log('获取到的数据:', response.data);\r\n      jobs.value = response.data;\r\n    } else {\r\n      console.error('响应体为空');\r\n    }\r\n  } catch (error) {\r\n    console.error('获取职位数据失败:', error.message);\r\n  }\r\n};\r\n\r\n// 删除职位\r\nconst deleteJob = async (job) => {\r\n  try {\r\n    const response = await axios.delete(`http://localhost:8090/delactivity/${job.id}`, {\r\n      withCredentials: true,\r\n      timeout: 10000\r\n    });\r\n    if (response.status === 200) {\r\n      const index = jobs.value.indexOf(job);\r\n      if (index > -1) {\r\n        jobs.value.splice(index, 1); // 从数组中删除该职位\r\n        ElMessage.success(`成功删除`); // 使用 ElMessage 显示成功提示\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error('删除职位失败:', error.message);\r\n    ElMessage.error('删除职位失败，请重试。'); // 使用 ElMessage 显示错误提示\r\n  }\r\n};\r\n\r\n// 页面加载时获取职位数据\r\nonMounted(fetchJobs);\r\n</script>\r\n\r\n<style scoped>\r\n.job-listing {\r\n  padding: 0; /* 清除内边距 */\r\n  margin: 0;  /* 清除外边距 */\r\n  width: 100%; /* 设置宽度为100% */\r\n}\r\n\r\n.el-table {\r\n  width: 100%; /* 设置表格宽度为100% */\r\n}\r\n\r\n.pagination-container {\r\n  margin-top: 20px; /* 添加一些顶部间距 */\r\n}\r\n</style>\r\n\r\n\r\n<style scoped>\r\n.job-listing {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  font-family: Arial, sans-serif;\r\n}\r\n\r\n.el-table {\r\n  width: 100%;\r\n}\r\n\r\n.el-table th, .el-table td {\r\n  text-align: center; /* 文本居中 */\r\n}\r\n\r\n/* 鼠标悬停时的行样式 */\r\n.el-table tr:hover {\r\n  background-color: #f5f5f5; /* 鼠标悬停时的背景色 */\r\n}\r\n\r\n/* 操作按钮样式 */\r\n.el-button {\r\n  margin-right: 5px; /* 按钮间距 */\r\n}\r\n\r\n/* 输入框样式 */\r\n.el-input {\r\n  width: 200px; /* 输入框宽度 */\r\n}\r\n\r\n/* 分页器容器样式 */\r\n.pagination-container {\r\n  display: flex;\r\n  justify-content: flex-end; /* 使分页器固定在右侧 */\r\n  margin-top: 20px; /* 上边距 */\r\n}\r\n</style>","import script from \"./ActivityManage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ActivityManage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ActivityManage.vue?vue&type=style&index=0&id=ffaa08be&scoped=true&lang=css\"\nimport \"./ActivityManage.vue?vue&type=style&index=1&id=ffaa08be&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ffaa08be\"]])\n\nexport default __exports__"],"names":["jobs","ref","search","currentPage","pageSize","filteredJobs","computed","searchTerm","value","trim","toLowerCase","filter","job","author","includes","paginatedJobs","start","slice","handleCurrentChange","page","handlePageSizeChange","size","fetchJobs","async","response","axios","get","withCredentials","timeout","data","console","log","error","message","deleteJob","delete","id","status","index","indexOf","splice","ElMessage","success","onMounted","__exports__"],"sourceRoot":""}